# TVLabs 爬虫项目文件说明

该项目用于从 **TVLabs** 网站抓取不同品牌和年份的电视机型信息，并将其保存为规范的 **YAML** 格式。以下是项目中各个文件和目录的详细说明。

## 文件列表与功能说明

### 1. `brands.yaml`

- **作用**：存储从 **TVLabs** 网站抓取的所有品牌信息，包括品牌的路径、URL 和名称。
- **用途**：作为后续抓取品牌机型数据的基础文件。

### 2. `step1_scrape_brands.py`

- **功能**：从 **TVLabs** 网站抓取品牌列表，并生成 `brands.yaml` 文件。
- **步骤**：
  1. 访问 `https://tvlabs.cn/tv` 页面。
  2. 抓取页面中的品牌路径、URL 和名称。
  3. 生成并输出 `brands.yaml` 文件。
- **依赖**：
  - `playwright`：用于网页自动化。
  - `pyyaml`：用于输出 YAML 文件。

### 3. `step2_scrape_brand_cards.py`

- **功能**：抓取每个品牌页面上的2025年机型的卡片信息，并输出为原始 **YAML** 数据。
- **步骤**：
  1. 访问品牌页面。
  2. 抓取品牌下的所有2025年机型的卡片信息（如机型名称、首发日期、尺寸、价格等）。
  3. 输出原始的抓取数据为 **YAML** 格式。
- **用途**：为后续抓取每个品牌的详细信息提供原始数据。

### 4. `step3_batch_brand_paths_2025.py`

- **功能**：批量抓取所有品牌的2025年机型卡片数据，并输出为规范化的 **YAML** 文件。
- **步骤**：
  1. 读取 `brands.yaml` 文件，获取所有品牌路径。
  2. 对每个品牌页面进行批量抓取，提取2025年机型信息。
  3. 输出每个品牌的规范化 **YAML** 数据。
- **用途**：该脚本用于批量抓取并规范化输出所有品牌的机型数据。

### 5. `step4_scrape_all_brands_2026_spec.py`

- **功能**：与 `step3_batch_brand_paths_2025.py` 类似，但抓取的是 **2026年** 机型数据。
- **步骤**：
  1. 类似于 `step3`，但目标改为抓取 **2026年** 机型的数据。
  2. 从 `brands.yaml` 中读取品牌路径，逐个抓取每个品牌的 **2026年** 机型数据。
  3. 输出结果为规范化的 **YAML** 格式，支持断点续跑。
- **用途**：当需要抓取 **2026年** 的机型时，使用此脚本。

### 6. `tcl_step3_batch_2025.py`

- **功能**：专门为 **TCL** 品牌定制的批量抓取脚本，用于抓取 **TCL** 品牌的2025年机型数据。
- **步骤**：
  1. 读取 `brands.yaml` 文件，筛选出 **TCL** 品牌路径。
  2. 抓取 **TCL** 品牌的所有2025年机型信息，提取详细参数。
  3. 输出 **TCL** 品牌机型的规范化 **YAML** 文件。
- **用途**：用于抓取 **TCL** 品牌的电视机型数据，其他品牌可以跳过此脚本。

### 7. `convert_to_spec_yaml.py`

- **功能**：将抓取到的原始数据转换为规范化的 **YAML** 格式。
- **步骤**：
  1. 将抓取到的价格、尺寸等信息转换为标准化的 **YAML** 格式。
  2. 格式化数据，添加中文注释，确保输出符合规范。
- **用途**：该脚本用于将原始抓取数据进行清洗和转换，生成最终的规范化 **YAML** 文件。

---

## 目录说明

### 1. **`.pytest_cache`**

- **作用**：这是 **pytest**（一个 Python 测试框架）生成的缓存目录，用于存储测试运行的中间结果。
- **用途**：此目录属于测试框架的运行时文件，通常可以忽略或删除。如果不需要频繁运行测试，或者希望清理测试缓存，可以删除此目录。

### 2. **`__pycache__`**

- **作用**：这是 Python 生成的字节码缓存目录，存储 `.pyc` 文件，这些文件是 Python 源代码（`.py`）的编译版本。Python 会将脚本编译为字节码以提高运行效率，`.pyc` 文件通常位于这个目录中。
- **用途**：这个目录是 Python 运行时的标准目录，无需手动管理，通常可以忽略。你可以选择删除它以释放空间，Python 会在下一次运行时重新生成这些字节码。

### 3. **`out_step3_2025_spec`**

- **作用**：这个目录存储了 **2025年** 所有品牌的 **机型规格** 数据，输出的文件通常为 **YAML** 格式，包含了从爬虫抓取的详细电视机型数据。
- **用途**：该目录存储的是经过爬虫抓取、清洗和标准化后的数据，主要是 **2025年机型** 的信息。它是数据存储的重要目录。

### 4. **`output_all_brands_2026_spec`**

- **作用**：这个目录存储了 **2026年** 所有品牌的 **机型规格** 数据，输出的文件也为 **YAML** 格式。与 `out_step3_2025_spec` 相似，但包含的是 **2026年** 的机型数据。
- **用途**：该目录用于存储爬虫抓取并规范化后的 **2026年机型** 数据。如果你抓取了2026年的机型信息，该目录将包含所有品牌的相关数据。

### 5. **`output_step3_test`**

- **作用**：此目录似乎是一个临时输出目录，可能用于 **爬虫测试** 或 **调试** 目的。通常包含抓取过程中的中间结果、测试样本或调试文件。
- **用途**：它可能用于测试阶段的输出目录，可以删除或清理，除非它包含需要保留的测试数据。

---

## 运行步骤

1. **抓取品牌列表**：首先运行 `step1_scrape_brands.py` 来抓取所有品牌，并生成 `brands.yaml`。
2. **抓取品牌机型卡片信息**：然后运行 `step2_scrape_brand_cards.py` 抓取每个品牌2025年机型的卡片信息。
3. **批量抓取机型信息**：运行 `step3_batch_brand_paths_2025.py` 批量抓取所有品牌的机型数据。
4. **抓取2026年机型信息**：如果需要抓取2026年机型的数据，可以运行 `step4_scrape_all_brands_2026_spec.py`。
5. **专门抓取TCL品牌**：如果只需要抓取 **TCL** 品牌的数据，使用 `tcl_step3_batch_2025.py`。
6. **生成规范化 YAML 文件**：使用 `convert_to_spec_yaml.py` 将抓取的数据转换为最终的规范化 **YAML** 文件。

---

## 依赖包

### 安装依赖

本项目依赖以下 Python 包 `requirements.txt` 文件：

```txt
playwright==1.27.0
pyyaml==6.0
```

### 安装步骤：

在项目根目录下，运行以下命令来安装依赖：

```
pip install -r requirements.txt
```